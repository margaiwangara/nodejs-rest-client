(this.webpackJsonpnodejsrestclient=this.webpackJsonpnodejsrestclient||[]).push([[10],{162:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(164);function o(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(162);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},164:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},166:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r={height:"100vh",width:"100%",boxSizing:"border-box"},o={position:"absolute",right:0,padding:"0.375rem 0.75rem",cursor:"pointer"},a={position:"absolute",height:"50px",width:"50px",right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}},221:function(e,t,n){"use strict";n.r(t);var r=n(58),o=n(12),a=n(163),i=n(0),c=n.n(i),s=n(2),u=n(56),l=n(167),f=n(165),m=n(1),p=n.n(m);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(e);if(0===t)return n;var r=n.match(/(.*?)([0-9]+)(.*)/),o=r?r[1]:"",a=r?r[3]:"",i=r?r[2]:n,c=i.length>=t?i:(j(Array(t)).map((function(){return"0"})).join("")+i).slice(-1*t);return"".concat(o).concat(c).concat(a)}var S={daysInHours:!1,zeroPadTime:2};function T(e,t){var n=e.days,r=e.hours,o=e.minutes,a=e.seconds,i=Object.assign({},S,t),c=i.daysInHours,s=i.zeroPadTime,u=i.zeroPadDays,l=void 0===u?s:u,f=c?O(r+24*n,s):O(r,Math.min(2,s));return{days:c?"":O(n,l),hours:f,minutes:O(o,Math.min(2,s)),seconds:O(a,Math.min(2,s))}}var E=function(e){function t(){var e;return d(this,t),(e=w(this,v(t).apply(this,arguments))).state={count:e.props.count||3},e.startCountdown=function(){e.interval=window.setInterval((function(){0===e.state.count-1?(e.stopCountdown(),e.props.onComplete&&e.props.onComplete()):e.setState((function(e){return{count:e.count-1}}))}),1e3)},e.stopCountdown=function(){clearInterval(e.interval)},e.addTime=function(t){e.stopCountdown(),e.setState((function(e){return{count:e.count+t}}),e.startCountdown)},e}return b(t,e),y(t,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?c.a.cloneElement(this.props.children,{count:this.state.count}):null}}]),t}(c.a.Component);E.propTypes={count:p.a.number,children:p.a.element,onComplete:p.a.func};var C=function(e){function t(e){var n;return d(this,t),(n=w(this,v(t).call(this,e))).mounted=!1,n.legacyMode=!1,n.legacyCountdownRef=c.a.createRef(),n.tick=function(){var e=n.props.onTick,t=n.calcTimeDelta();n.setTimeDeltaState(t),e&&t.total>0&&e(t)},n.start=function(){n.setState((function(e){var t=e.offsetStart;return{offsetStart:0,offsetTime:e.offsetTime+(t?Date.now()-t:0)}}),(function(){var e=n.calcTimeDelta();n.setTimeDeltaState(e),n.props.onStart&&n.props.onStart(e),n.props.controlled||(n.clearInterval(),n.interval=window.setInterval(n.tick,n.props.intervalDelay))}))},n.pause=function(){n.clearInterval(),n.setState({offsetStart:n.calcOffsetStart()},(function(){var e=n.calcTimeDelta();n.setTimeDeltaState(e),n.props.onPause&&n.props.onPause(e)}))},n.isPaused=function(){return n.state.offsetStart>0},n.isCompleted=function(){return n.state.timeDelta.completed},e.date?n.state={timeDelta:n.calcTimeDelta(),offsetStart:e.autoStart?0:n.calcOffsetStart(),offsetTime:0}:n.legacyMode=!0,n}return b(t,e),y(t,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.autoStart&&this.start(),this.props.onMount&&this.props.onMount(this.calcTimeDelta()))}},{key:"componentDidUpdate",value:function(e){this.legacyMode||this.shallowCompareProps(this.props,e)||this.setTimeDeltaState(this.calcTimeDelta())}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearInterval())}},{key:"calcTimeDelta",value:function(){var e=this.props;return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.now,o=void 0===r?Date.now:r,a=n.precision,i=void 0===a?0:a,c=n.controlled,s=void 0!==c&&c,u=n.offsetTime,l=void 0===u?0:u;t="string"===typeof e?new Date(e).getTime():e instanceof Date?e.getTime():e,s||(t+=l);var f=Math.round(1e3*parseFloat((Math.max(0,s?t:t-o())/1e3).toFixed(Math.max(0,Math.min(20,i))))),m=f/1e3;return{total:f,days:Math.floor(m/86400),hours:Math.floor(m/3600%24),minutes:Math.floor(m/60%60),seconds:Math.floor(m%60),milliseconds:Number((m%1*1e3).toFixed()),completed:f<=0}}(e.date,{now:e.now,precision:e.precision,controlled:e.controlled,offsetTime:this.state?this.state.offsetTime:0})}},{key:"calcOffsetStart",value:function(){return Date.now()}},{key:"addTime",value:function(e){this.legacyCountdownRef.current.addTime(e)}},{key:"clearInterval",value:function(){window.clearInterval(this.interval)}},{key:"shallowCompareProps",value:function(e,t){var n=Object.keys(e);return n.length===Object.keys(t).length&&!n.some((function(n){var r=e[n],o=t[n];return!t.hasOwnProperty(n)||!(r===o||r!==r&&o!==o)}))}},{key:"setTimeDeltaState",value:function(e){var t,n=this;if(!this.state.timeDelta.completed&&e.completed&&(this.clearInterval(),t=function(){return n.props.onComplete&&n.props.onComplete(e)}),this.mounted)return this.setState({timeDelta:e},t)}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,isPaused:this.isPaused,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var e=this.props,t=e.daysInHours,n=e.zeroPadTime,r=e.zeroPadDays,o=this.state.timeDelta;return Object.assign({},o,{api:this.getApi(),props:this.props,formatted:T(o,{daysInHours:t,zeroPadTime:n,zeroPadDays:r})})}},{key:"render",value:function(){if(this.legacyMode){var e=this.props,t=e.count,n=e.children,r=e.onComplete;return c.a.createElement(E,{ref:this.legacyCountdownRef,count:t,onComplete:r},n)}var o=this.props,a=o.children,i=o.renderer,s=this.getRenderProps();if(i)return i(s);if(a&&this.state.timeDelta.completed)return c.a.cloneElement(a,{countdown:s});var u=s.formatted,l=u.days,f=u.hours,m=u.minutes,p=u.seconds;return c.a.createElement("span",null,l,l?":":"",f,":",m,":",p)}}]),t}(c.a.Component);C.defaultProps=Object.assign({},S,{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0}),C.propTypes={date:p.a.oneOfType([p.a.instanceOf(Date),p.a.string,p.a.number]),daysInHours:p.a.bool,zeroPadTime:p.a.number,zeroPadDays:p.a.number,controlled:p.a.bool,intervalDelay:p.a.number,precision:p.a.number,autoStart:p.a.bool,children:p.a.element,renderer:p.a.func,now:p.a.func,onMount:p.a.func,onStart:p.a.func,onPause:p.a.func,onTick:p.a.func,onComplete:p.a.func};var D=C,k=n(166),P=n(59),I={code:""};t.default=function(){var e=Object(i.useState)(I),t=Object(a.a)(e,2),n=t[0],m=t[1],p=Object(s.g)(),d=Object(u.b)(),h=Object(u.c)((function(e){return e.error})).error,y=Object(u.c)((function(e){return e.user})),b=y.code,v=y.expiry;return Object(i.useEffect)((function(){var e=window.localStorage.getItem("jwt");e?(Object(l.j)(e),Object(l.d)().then((function(e){var t=e.twoFactorCode,n=e.twoFactorCodeExpire;t||p.push("/"),d(Object(l.i)(t,n))})).catch((function(){p.push("/login")}))):p.push("/login")}),[b]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row",style:k.c},c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(c.a.Suspense,{fallback:Object(P.a)()},c.a.createElement("div",{className:"card",style:{marginTop:"20vh"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m(I),Object(l.b)(n.code,d).then((function(){window.localStorage.getItem("jwt")&&Object(l.d)().then((function(e){var t={email:e.email,name:e.name,createdAt:e.createdAt,profileImage:e.profileImage,twoFactorCode:e.twoFactorCode,twoFactorCodeExpire:e.twoFactorCodeExpire,recoveryEmail:e.recoveryEmail,twoFactorEnable:e.twoFactorEnable};d(Object(l.k)(t)),p.push("/")})).catch((function(){return d(Object(l.f)())})),p.push("/login")}))}},c.a.createElement("div",{className:"text-center border-bottom mb-3"},c.a.createElement("h3",null,"Two Factor Authentication"),c.a.createElement("p",{className:"text-muted mb-1"},"Please input the code sent to your e-mail address to access your account."," ",v?c.a.createElement("span",null,"The code will expire in:"," ",c.a.createElement("span",{className:"font-weight-bold d-block",style:{fontSize:"2.5rem"}},c.a.createElement(D,{date:v,renderer:function(e){var t=e.minutes,n=e.seconds;return e.completed||t<1?c.a.createElement("span",{className:"text-danger"},t,":",n):c.a.createElement("span",{className:"text-success"},t,":",n)}}))):"")),h?c.a.createElement("div",{className:"alert alert-danger"},Array.isArray(h.message)?c.a.createElement("ul",{className:"list-unstyled p-0 m-0"},h.message.map((function(e,t){return c.a.createElement("li",{key:t},e)}))):h.message):"",c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",placeholder:"Code",name:"code",value:n.code,onChange:function(e){return m(Object(o.a)({},n,Object(r.a)({},e.target.name,e.target.value)))},className:"form-control"})),c.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Submit Code"),c.a.createElement("button",{className:"btn btn-secondary btn-block",type:"button",onClick:function(e){Object(l.h)().then((function(e){var t=e.code,n=e.expiry;d(Object(l.i)(t,n))})).catch((function(e){return Object(f.a)(e)}))}},"Resend Code"))))))))}}}]);
//# sourceMappingURL=10.f5cad7dc.chunk.js.map