(this.webpackJsonpnodejsrestclient=this.webpackJsonpnodejsrestclient||[]).push([[11],{161:function(t,e,n){"use strict";var r=n(0),o=n.n(r),a=n(167);e.a=function(t){var e=t.title;return o.a.createElement(a.a,null,o.a.createElement("title",null,"Drift | ".concat(e||"Home")))}},163:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(165);function o(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},164:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(163);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},165:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},168:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r={height:"100vh",width:"100%",boxSizing:"border-box"},o={position:"absolute",right:0,padding:"0.375rem 0.75rem",cursor:"pointer"},a={position:"absolute",height:"50px",width:"50px",right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}},225:function(t,e,n){"use strict";n.r(e);var r=n(58),o=n(12),a=n(164),i=n(0),c=n.n(i),s=n(2),u=n(56),l=n(169),f=n(166),m=n(1),p=n.n(m);function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(t);if(0===e)return n;var r=n.match(/(.*?)([0-9]+)(.*)/),o=r?r[1]:"",a=r?r[3]:"",i=r?r[2]:n,c=i.length>=e?i:(j(Array(e)).map((function(){return"0"})).join("")+i).slice(-1*e);return"".concat(o).concat(c).concat(a)}var S={daysInHours:!1,zeroPadTime:2};function E(t,e){var n=t.days,r=t.hours,o=t.minutes,a=t.seconds,i=Object.assign({},S,e),c=i.daysInHours,s=i.zeroPadTime,u=i.zeroPadDays,l=void 0===u?s:u,f=c?O(r+24*n,s):O(r,Math.min(2,s));return{days:c?"":O(n,l),hours:f,minutes:O(o,Math.min(2,s)),seconds:O(a,Math.min(2,s))}}var T=function(t){function e(){var t;return d(this,e),(t=w(this,b(e).apply(this,arguments))).state={count:t.props.count||3},t.startCountdown=function(){t.interval=window.setInterval((function(){0===t.state.count-1?(t.stopCountdown(),t.props.onComplete&&t.props.onComplete()):t.setState((function(t){return{count:t.count-1}}))}),1e3)},t.stopCountdown=function(){clearInterval(t.interval)},t.addTime=function(e){t.stopCountdown(),t.setState((function(t){return{count:t.count+e}}),t.startCountdown)},t}return v(e,t),y(e,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?c.a.cloneElement(this.props.children,{count:this.state.count}):null}}]),e}(c.a.Component);T.propTypes={count:p.a.number,children:p.a.element,onComplete:p.a.func};var C=function(t){function e(t){var n;return d(this,e),(n=w(this,b(e).call(this,t))).mounted=!1,n.legacyMode=!1,n.legacyCountdownRef=c.a.createRef(),n.tick=function(){var t=n.props.onTick,e=n.calcTimeDelta();n.setTimeDeltaState(e),t&&e.total>0&&t(e)},n.start=function(){n.setState((function(t){var e=t.offsetStart;return{offsetStart:0,offsetTime:t.offsetTime+(e?Date.now()-e:0)}}),(function(){var t=n.calcTimeDelta();n.setTimeDeltaState(t),n.props.onStart&&n.props.onStart(t),n.props.controlled||(n.clearInterval(),n.interval=window.setInterval(n.tick,n.props.intervalDelay))}))},n.pause=function(){n.clearInterval(),n.setState({offsetStart:n.calcOffsetStart()},(function(){var t=n.calcTimeDelta();n.setTimeDeltaState(t),n.props.onPause&&n.props.onPause(t)}))},n.isPaused=function(){return n.state.offsetStart>0},n.isCompleted=function(){return n.state.timeDelta.completed},t.date?n.state={timeDelta:n.calcTimeDelta(),offsetStart:t.autoStart?0:n.calcOffsetStart(),offsetTime:0}:n.legacyMode=!0,n}return v(e,t),y(e,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.autoStart&&this.start(),this.props.onMount&&this.props.onMount(this.calcTimeDelta()))}},{key:"componentDidUpdate",value:function(t){this.legacyMode||this.shallowCompareProps(this.props,t)||this.setTimeDeltaState(this.calcTimeDelta())}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearInterval())}},{key:"calcTimeDelta",value:function(){var t=this.props;return function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.now,o=void 0===r?Date.now:r,a=n.precision,i=void 0===a?0:a,c=n.controlled,s=void 0!==c&&c,u=n.offsetTime,l=void 0===u?0:u;e="string"===typeof t?new Date(t).getTime():t instanceof Date?t.getTime():t,s||(e+=l);var f=Math.round(1e3*parseFloat((Math.max(0,s?e:e-o())/1e3).toFixed(Math.max(0,Math.min(20,i))))),m=f/1e3;return{total:f,days:Math.floor(m/86400),hours:Math.floor(m/3600%24),minutes:Math.floor(m/60%60),seconds:Math.floor(m%60),milliseconds:Number((m%1*1e3).toFixed()),completed:f<=0}}(t.date,{now:t.now,precision:t.precision,controlled:t.controlled,offsetTime:this.state?this.state.offsetTime:0})}},{key:"calcOffsetStart",value:function(){return Date.now()}},{key:"addTime",value:function(t){this.legacyCountdownRef.current.addTime(t)}},{key:"clearInterval",value:function(){window.clearInterval(this.interval)}},{key:"shallowCompareProps",value:function(t,e){var n=Object.keys(t);return n.length===Object.keys(e).length&&!n.some((function(n){var r=t[n],o=e[n];return!e.hasOwnProperty(n)||!(r===o||r!==r&&o!==o)}))}},{key:"setTimeDeltaState",value:function(t){var e,n=this;if(!this.state.timeDelta.completed&&t.completed&&(this.clearInterval(),e=function(){return n.props.onComplete&&n.props.onComplete(t)}),this.mounted)return this.setState({timeDelta:t},e)}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,isPaused:this.isPaused,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var t=this.props,e=t.daysInHours,n=t.zeroPadTime,r=t.zeroPadDays,o=this.state.timeDelta;return Object.assign({},o,{api:this.getApi(),props:this.props,formatted:E(o,{daysInHours:e,zeroPadTime:n,zeroPadDays:r})})}},{key:"render",value:function(){if(this.legacyMode){var t=this.props,e=t.count,n=t.children,r=t.onComplete;return c.a.createElement(T,{ref:this.legacyCountdownRef,count:e,onComplete:r},n)}var o=this.props,a=o.children,i=o.renderer,s=this.getRenderProps();if(i)return i(s);if(a&&this.state.timeDelta.completed)return c.a.cloneElement(a,{countdown:s});var u=s.formatted,l=u.days,f=u.hours,m=u.minutes,p=u.seconds;return c.a.createElement("span",null,l,l?":":"",f,":",m,":",p)}}]),e}(c.a.Component);C.defaultProps=Object.assign({},S,{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0}),C.propTypes={date:p.a.oneOfType([p.a.instanceOf(Date),p.a.string,p.a.number]),daysInHours:p.a.bool,zeroPadTime:p.a.number,zeroPadDays:p.a.number,controlled:p.a.bool,intervalDelay:p.a.number,precision:p.a.number,autoStart:p.a.bool,children:p.a.element,renderer:p.a.func,now:p.a.func,onMount:p.a.func,onStart:p.a.func,onPause:p.a.func,onTick:p.a.func,onComplete:p.a.func};var D=C,k=n(168),P=n(59),I=n(161),M={code:""};e.default=function(){var t=Object(i.useState)(M),e=Object(a.a)(t,2),n=e[0],m=e[1],p=Object(s.g)(),d=Object(u.b)(),h=Object(u.c)((function(t){return t.error})).error,y=Object(u.c)((function(t){return t.user})),v=y.code,b=y.expiry;return Object(i.useEffect)((function(){var t=window.localStorage.getItem("jwt");t?(Object(l.j)(t),Object(l.d)().then((function(t){var e=t.twoFactorCode,n=t.twoFactorCodeExpire;e||p.push("/"),d(Object(l.i)(e,n))})).catch((function(){p.push("/login")}))):p.push("/login")}),[v]),c.a.createElement("div",{className:"container"},c.a.createElement(I.a,{title:"Two Factor"}),c.a.createElement("div",{className:"row",style:k.c},c.a.createElement("div",{className:"col-md-6 offset-md-3"},c.a.createElement(c.a.Suspense,{fallback:Object(P.a)()},c.a.createElement("div",{className:"card",style:{marginTop:"20vh"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m(M),Object(l.b)(n.code,d).then((function(){window.localStorage.getItem("jwt")&&Object(l.d)().then((function(t){var e={email:t.email,name:t.name,createdAt:t.createdAt,profileImage:t.profileImage,twoFactorCode:t.twoFactorCode,twoFactorCodeExpire:t.twoFactorCodeExpire,recoveryEmail:t.recoveryEmail,twoFactorEnable:t.twoFactorEnable};d(Object(l.k)(e)),p.push("/")})).catch((function(){return d(Object(l.f)())})),p.push("/login")}))}},c.a.createElement("div",{className:"text-center border-bottom mb-3"},c.a.createElement("h3",null,"Two Factor Authentication"),c.a.createElement("p",{className:"text-muted mb-1"},"Please input the code sent to your e-mail address to access your account."," ",b?c.a.createElement("span",null,"The code will expire in:"," ",c.a.createElement("span",{className:"font-weight-bold d-block",style:{fontSize:"2.5rem"}},c.a.createElement(D,{date:b,renderer:function(t){var e=t.minutes,n=t.seconds;return t.completed||e<1?c.a.createElement("span",{className:"text-danger"},e,":",n):c.a.createElement("span",{className:"text-success"},e,":",n)}}))):"")),h?c.a.createElement("div",{className:"alert alert-danger"},Array.isArray(h.message)?c.a.createElement("ul",{className:"list-unstyled p-0 m-0"},h.message.map((function(t,e){return c.a.createElement("li",{key:e},t)}))):h.message):"",c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",placeholder:"Code",name:"code",value:n.code,onChange:function(t){return m(Object(o.a)({},n,Object(r.a)({},t.target.name,t.target.value)))},className:"form-control"})),c.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Submit Code"),c.a.createElement("button",{className:"btn btn-secondary btn-block",type:"button",onClick:function(t){Object(l.h)().then((function(t){var e=t.code,n=t.expiry;d(Object(l.i)(e,n))})).catch((function(t){return Object(f.a)(t)}))}},"Resend Code"))))))))}}}]);
//# sourceMappingURL=11.bb8b9bd8.chunk.js.map